<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title data-translate-key="titleResult">ゲーム結果</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1 id="end-message"></h1>

        <div id="result-summary" class="result-summary">
            <table>
                <tbody>
                    <tr>
                        <th data-translate-key="alertScore">今回のスコア</th>
                        <td id="score">0</td>
                    </tr>
                    <tr>
                        <th data-translate-key="alertTimeBonus">タイムボーナス</th>
                        <td id="time-bonus">0</td>
                    </tr>
                    <tr>
                        <th data-translate-key="alertTotalScore">合計スコア</th>
                        <td id="total-score">0</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="stats-section" class="stats-section">
            <div>
                <h2 data-translate-key="scoreTransition">スコア推移</h2>
                <select id="stage-select" class="custom-select"></select>
                <div class="chart-container" id="chart-container" style="width: 100%; height: 300px; margin-top: 20px;">
                    <canvas id="score-chart"></canvas>
                </div>
                <div id="score-table-container" class="score-table-container" style="display: none;">
                    <table id="score-table">
                        <thead></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div id="weak-key-section">
                <h2 data-translate-key="keyStatsTitle">苦手キー分析 (ミスタッチ数)</h2>
                <div id="key-stats-grid" class="key-stats-grid"></div>
            </div>
        </div>

        <div class="menu-buttons" style="margin-top: 30px; flex-direction: row; justify-content: center; gap: 20px;">
            <button class="menu-button" id="retry-button" data-translate-key="retry">もういちど</button>
            <button class="menu-button" id="back-button" data-translate-key="backToMenu">メニューへ</button>
            <button class="menu-button" id="clear-history-button" data-translate-key="clearHistoryButton">履歴をクリア</button>
        </div>
    </div>

    <script>
        if (!navigator.userAgent.includes('Windows NT 6.1')) {
            document.write('<script src="./node_modules/chart.js/dist/chart.umd.js"><\/script>');
        }
    </script>
    <script src="modal.js"></script>
    <script src="result.renderer.js"></script>
</body>
</html>
